<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Duo - Client Portal</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .welcome-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .welcome-text h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .welcome-text p {
            font-size: 1.1rem;
            color: #666;
            line-height: 1.6;
        }

        .plan-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .current-plan {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 25px;
        }

        .plan-info h2 {
            font-size: 1.8rem;
            color: #1e293b;
            margin-bottom: 5px;
        }

        .plan-price {
            font-size: 2.2rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .plan-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .status-badges {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .badge {
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .badge.active {
            background: linear-gradient(135deg, #4ade80, #22c55e);
            color: white;
        }

        .badge.pending {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: white;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.15);
        }

        .card h2 {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .metric-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .metric-row:last-child {
            border-bottom: none;
        }

        .metric-label {
            font-weight: 500;
            color: #64748b;
        }

        .metric-value {
            font-weight: 700;
            font-size: 1.2rem;
            color: #1e293b;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }

        .appointments-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .appointment-item {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .appointment-item:hover {
            background: #e2e8f0;
            transform: translateX(5px);
        }

        .appointment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .appointment-time {
            font-weight: 700;
            color: #667eea;
        }

        .appointment-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-confirmed {
            background: #dcfce7;
            color: #166534;
        }

        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .appointment-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .appointment-btn {
            padding: 6px 16px;
            border: none;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-feedback {
            background: #667eea;
            color: white;
        }

        .btn-feedback:hover {
            background: #5a67d8;
        }

        .btn-reschedule {
            background: #f59e0b;
            color: white;
        }

        .btn-reschedule:hover {
            background: #d97706;
        }

        .btn-cancel {
            background: #ef4444;
            color: white;
        }

        .btn-cancel:hover {
            background: #dc2626;
        }

        .feedback-form {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-top: 15px;
            border: 2px solid #e2e8f0;
            display: none;
        }

        .feedback-form.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #374151;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-textarea {
            min-height: 80px;
            resize: vertical;
        }

        .form-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .calendar-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-top: 15px;
            border: 2px solid #e2e8f0;
            display: none;
        }

        .calendar-container.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-nav {
            background: #667eea;
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            cursor: pointer;
            font-weight: bold;
        }

        .calendar-nav:hover {
            background: #5a67d8;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 20px;
        }

        .calendar-day {
            padding: 10px;
            text-align: center;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .calendar-day.header {
            font-weight: 600;
            color: #64748b;
            cursor: default;
        }

        .calendar-day:not(.header):hover {
            background: #e2e8f0;
        }

        .calendar-day.selected {
            background: #667eea;
            color: white;
        }

        .calendar-day.disabled {
            color: #cbd5e1;
            cursor: not-allowed;
        }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .time-slot {
            padding: 8px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .time-slot:hover {
            border-color: #667eea;
        }

        .time-slot.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .success-message {
            background: #dcfce7;
            color: #166534;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-weight: 600;
            display: none;
        }

        .success-message.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .prospect-item {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .prospect-item:hover {
            background: #e2e8f0;
            transform: scale(1.02);
        }

        .prospect-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .business-name {
            font-weight: 700;
            color: #1e293b;
            font-size: 1.1rem;
        }

        .service-tag {
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .prospect-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .detail-item {
            color: #64748b;
            font-size: 0.9rem;
        }

        .detail-label {
            font-weight: 600;
            color: #374151;
        }

        .vendor-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
        }

        .has-vendor {
            background: #fecaca;
            color: #991b1b;
        }

        .no-vendor {
            background: #bbf7d0;
            color: #166534;
        }

        .notes-section {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 3px solid #667eea;
        }

        .notes-label {
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .notes-content {
            color: #64748b;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .icon {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        .plan-feature {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .plan-feature:last-child {
            border-bottom: none;
        }

        .feature-icon {
            color: #22c55e;
            margin-right: 10px;
        }

        .plan-options {
            display: grid;
            gap: 20px;
            margin-top: 20px;
        }

        .plan-option {
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .plan-option:hover {
            border-color: #667eea;
            background: #f8fafc;
        }

        .plan-option.current {
            border-color: #22c55e;
            background: #f0fdf4;
        }

        .cta-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .last-updated {
            text-align: center;
            color: #64748b;
            font-size: 0.9rem;
            margin-top: 30px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .welcome-section, .current-plan {
                flex-direction: column;
                text-align: center;
            }
            
            .welcome-text h1 {
                font-size: 2rem;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .prospect-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <div class="welcome-section">
                <div class="welcome-text">
                    <h1>Welcome, Dynamic Duo!</h1>
                    <p>Your comprehensive business intelligence dashboard. Track activities, manage appointments, and monitor client progress all in one place.</p>
                </div>
                <div class="status-badges">
                    <div class="badge active">
                        <svg class="icon" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"/>
                        </svg>
                        Account Active
                    </div>
                    <div class="badge pending">
                        <svg class="icon" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"/>
                        </svg>
                        Sync Pending
                    </div>
                </div>
            </div>
        </div>

        <!-- Current Plan Section -->
        <div class="plan-section">
            <div class="current-plan">
                <div class="plan-info">
                    <h2 data-plan="name">Pro Plan 1000</h2>
                    <div class="plan-price">Current Plan</div>
                    <p style="color: #64748b; margin-top: 5px;">Next billing: October 22, 2025</p>
                </div>
                <div class="plan-buttons">
                    <button class="btn btn-primary" onclick="showPlanDetails()">View Plan Details</button>
                    <button class="btn btn-secondary" onclick="showPlanOptions()">Change Plan</button>
                    <button class="btn btn-secondary" onclick="window.open('https://kinectb2b-affiliate.com/', '_blank')">Become an Affiliate</button>
                </div>
            </div>
        </div>

        <!-- Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- Activity Dashboard -->
            <div class="card">
                <h2>
                    <svg class="icon" viewBox="0 0 20 20">
                        <path d="M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"/>
                        <path d="M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"/>
                    </svg>
                    Activity Dashboard
                </h2>
                <div class="metric-row">
                    <span class="metric-label">Total Appointments Set</span>
                    <span class="metric-value" data-metric="totalAppointments">187</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Businesses Contacted</span>
                    <span class="metric-value" data-metric="businessesContacted">83</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">People Called</span>
                    <span class="metric-value" data-metric="peopleCalled">250</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Total Contact Points</span>
                    <span class="metric-value" data-metric="totalContactPoints">2,250</span>
                </div>
            </div>

            <!-- Monthly Activity Chart -->
            <div class="card">
                <h2>
                    <svg class="icon" viewBox="0 0 20 20">
                        <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                    </svg>
                    Monthly Activity Trends
                </h2>
                <div class="chart-container">
                    <canvas id="activityChart"></canvas>
                </div>
            </div>

            <!-- Upcoming Appointments -->
            <div class="card">
                <h2>
                    <svg class="icon" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"/>
                    </svg>
                    Upcoming Appointments
                </h2>
                <div class="appointments-list">
                    <div class="appointment-item" data-appointment-id="0">
                        <div class="appointment-header">
                            <div class="appointment-time">Tomorrow, 2:00 PM</div>
                            <div class="appointment-status status-confirmed">Confirmed</div>
                        </div>
                        <div class="business-name">TechStart Solutions</div>
                        <div class="detail-item">John Mitchell • CRM Implementation • Downtown Office</div>
                        
                        <div class="appointment-actions">
                            <button class="appointment-btn btn-feedback" onclick="showFeedbackForm(0)">Add Feedback</button>
                            <button class="appointment-btn btn-reschedule" onclick="showRescheduleCalendar(0)">Reschedule</button>
                            <button class="appointment-btn btn-cancel" onclick="cancelAppointment(0)">Cancel</button>
                        </div>
                        
                        <div class="feedback-form" id="feedback-form-0">
                            <h4 style="margin-bottom: 15px; color: #374151;">Appointment Feedback</h4>
                            <div class="form-group">
                                <label class="form-label">How did the appointment go?</label>
                                <select class="form-select" id="outcome-0">
                                    <option value="">Select outcome...</option>
                                    <option value="closed-won">Closed - Deal Won!</option>
                                    <option value="closed-lost">Closed - Deal Lost</option>
                                    <option value="follow-up">Need Follow-up</option>
                                    <option value="proposal-sent">Proposal Sent</option>
                                    <option value="no-show">No Show</option>
                                    <option value="reschedule-needed">Need to Reschedule</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Deal Value (if closed)</label>
                                <input type="number" class="form-input" id="deal-value-0" placeholder="Enter deal value" min="0" step="100">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Notes</label>
                                <textarea class="form-textarea" id="notes-0" placeholder="Share details about the appointment, next steps, or any important information..."></textarea>
                            </div>
                            <div class="form-buttons">
                                <button class="btn btn-secondary" onclick="hideFeedbackForm(0)">Cancel</button>
                                <button class="btn btn-primary" onclick="submitFeedback(0)">Submit Feedback</button>
                            </div>
                        </div>
                        
                        <div class="calendar-container" id="calendar-container-0">
                            <h4 style="margin-bottom: 15px; color: #374151;">Reschedule Appointment</h4>
                            <div class="calendar-header">
                                <button class="calendar-nav" onclick="previousMonth(0)">&lt;</button>
                                <h3 id="calendar-month-0">October 2025</h3>
                                <button class="calendar-nav" onclick="nextMonth(0)">&gt;</button>
                            </div>
                            <div class="calendar-grid" id="calendar-grid-0">
                                <!-- Calendar days will be populated by JavaScript -->
                            </div>
                            <div class="time-slots" id="time-slots-0">
                                <div class="time-slot" onclick="selectTime(0, '9:00 AM')">9:00 AM</div>
                                <div class="time-slot" onclick="selectTime(0, '10:00 AM')">10:00 AM</div>
                                <div class="time-slot" onclick="selectTime(0, '11:00 AM')">11:00 AM</div>
                                <div class="time-slot" onclick="selectTime(0, '1:00 PM')">1:00 PM</div>
                                <div class="time-slot" onclick="selectTime(0, '2:00 PM')">2:00 PM</div>
                                <div class="time-slot" onclick="selectTime(0, '3:00 PM')">3:00 PM</div>
                                <div class="time-slot" onclick="selectTime(0, '4:00 PM')">4:00 PM</div>
                            </div>
                            <div class="form-buttons">
                                <button class="btn btn-secondary" onclick="hideRescheduleCalendar(0)">Cancel</button>
                                <button class="btn btn-primary" onclick="confirmReschedule(0)">Confirm New Time</button>
                            </div>
                        </div>
                        
                        <div class="success-message" id="success-message-0"></div>
                    </div>
                </div>
            </div>

            <!-- Current Prospects -->
            <div class="card">
                <h2>
                    <svg class="icon" viewBox="0 0 20 20">
                        <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
                    </svg>
                    Current Prospects
                </h2>
                <div style="max-height: 400px; overflow-y: auto;">
                    <div class="prospect-item">
                        <div class="prospect-header">
                            <div class="business-name">Enterprise Solutions Inc.</div>
                            <div class="service-tag">CRM Implementation</div>
                        </div>
                        <div class="prospect-details">
                            <div class="detail-item">
                                <div class="detail-label">Location:</div>
                                Chicago, IL • 15 Locations
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Current Vendor:</div>
                                <span class="vendor-status has-vendor">Has Vendor</span>
                            </div>
                        </div>
                        <div class="notes-section">
                            <div class="notes-label">Call Notes:</div>
                            <div class="notes-content">Interested in upgrading their current system. Current vendor contract expires in 6 months. Decision maker is the IT Director. Budget approved for Q1 2026.</div>
                        </div>
                    </div>

                    <div class="prospect-item">
                        <div class="prospect-header">
                            <div class="business-name">Regional Health Network</div>
                            <div class="service-tag">Marketing Automation</div>
                        </div>
                        <div class="prospect-details">
                            <div class="detail-item">
                                <div class="detail-label">Location:</div>
                                Milwaukee, WI • 8 Locations
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Current Vendor:</div>
                                <span class="vendor-status no-vendor">No Vendor</span>
                            </div>
                        </div>
                        <div class="notes-section">
                            <div class="notes-label">Call Notes:</div>
                            <div class="notes-content">New business, need to establish marketing systems from scratch. Looking for comprehensive solution including email campaigns and lead tracking. Timeline is flexible.</div>
                        </div>
                    </div>

                    <div class="prospect-item">
                        <div class="prospect-header">
                            <div class="business-name">Midwest Manufacturing</div>
                            <div class="service-tag">Sales Pipeline</div>
                        </div>
                        <div class="prospect-details">
                            <div class="detail-item">
                                <div class="detail-label">Location:</div>
                                Detroit, MI • 12 Locations
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Current Vendor:</div>
                                <span class="vendor-status has-vendor">Has Vendor</span>
                            </div>
                        </div>
                        <div class="notes-section">
                            <div class="notes-label">Call Notes:</div>
                            <div class="notes-content">Unhappy with current sales tracking system. Lost several deals due to poor follow-up. Ready to switch if we can demonstrate better ROI tracking and automated follow-ups.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Call-to-Action Section -->
        <div class="cta-section">
            <h2 style="margin-bottom: 20px; color: #1e293b;">Need Support or Have Questions?</h2>
            <p style="margin-bottom: 30px; color: #64748b; font-size: 1.1rem;">Our team is here to help you maximize your success. Reach out anytime for assistance with your campaigns or technical support.</p>
            <button class="btn btn-primary" onclick="window.location.href='mailto:support@kinectb2b.com'">Contact Support</button>
            <button class="btn btn-primary" onclick="window.location.href='tel:+1234567890'">Schedule Call</button>
        </div>

        <div class="last-updated">
            Last updated: <span id="lastUpdated"></span> • Auto-syncs with Pipedrive every 15 minutes
        </div>
    </div>

    <!-- Plan Details Modal -->
    <div id="planModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closePlanModal()">&times;</span>
            <h2 style="margin-bottom: 20px; color: #1e293b;">Pro Plan 1000 Details</h2>
            <div style="margin-bottom: 20px;">
                <div class="plan-price" style="margin-bottom: 10px; font-size: 1.5rem;">Your Current Plan</div>
                <p style="color: #64748b;">Comprehensive B2B lead generation and appointment setting</p>
            </div>
            
            <h3 style="margin: 20px 0 15px 0; color: #374151;">Your Plan Includes (Monthly):</h3>
            <div class="plan-feature">
                <span class="feature-icon">✓</span>
                <span><strong>83+ Different Businesses</strong> contacted monthly</span>
            </div>
            <div class="plan-feature">
                <span class="feature-icon">✓</span>
                <span><strong>250+ People Called</strong> across all target businesses</span>
            </div>
            <div class="plan-feature">
                <span class="feature-icon">✓</span>
                <span><strong>750+ Phone Calls</strong> made on your behalf</span>
            </div>
            <div class="plan-feature">
                <span class="feature-icon">✓</span>
                <span><strong>750+ Emails</strong> sent to prospects</span>
            </div>
            <div class="plan-feature">
                <span class="feature-icon">✓</span>
                <span><strong>750+ SMS Messages</strong> for follow-up</span>
            </div>
            <div class="plan-feature">
                <span class="feature-icon">✓</span>
                <span><strong>2,250+ Total Contact Points</strong> per month</span>
            </div>
            <div class="plan-feature">
                <span class="feature-icon">✓</span>
                <span>Research & Discovery of ideal clients</span>
            </div>
            <div class="plan-feature">
                <span class="feature-icon">✓</span>
                <span>Targeted engagement campaigns</span>
            </div>
            <div class="plan-feature">
                <span class="feature-icon">✓</span>
                <span>Qualified appointment scheduling</span>
            </div>
            <div class="plan-feature">
                <span class="feature-icon">✓</span>
                <span>Dedicated account management</span>
            </div>
            <div class="plan-feature">
                <span class="feature-icon">✓</span>
                <span>Monthly performance reporting</span>
            </div>
        </div>
    </div>

    <!-- Plan Options Modal -->
    <div id="planOptionsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closePlanOptionsModal()">&times;</span>
            <h2 style="margin-bottom: 20px; color: #1e293b;">Change Your Plan</h2>
            <p style="color: #64748b; margin-bottom: 30px;">Select a plan option below. Our team will contact you within 24 hours to process your request.</p>
            
            <div class="plan-options">
                <div class="plan-option" onclick="selectPlan('100')">
                    <h3 style="color: #374151; margin-bottom: 10px;">Pro Plan 100</h3>
                    <p style="color: #64748b; font-size: 0.9rem;">~8 businesses • ~25 people called monthly</p>
                </div>
                
                <div class="plan-option" onclick="selectPlan('200')">
                    <h3 style="color: #374151; margin-bottom: 10px;">Pro Plan 200</h3>
                    <p style="color: #64748b; font-size: 0.9rem;">~17 businesses • ~50 people called monthly</p>
                </div>
                
                <div class="plan-option" onclick="selectPlan('300')">
                    <h3 style="color: #374151; margin-bottom: 10px;">Pro Plan 300</h3>
                    <p style="color: #64748b; font-size: 0.9rem;">~25 businesses • ~75 people called monthly</p>
                </div>
                
                <div class="plan-option" onclick="selectPlan('400')">
                    <h3 style="color: #374151; margin-bottom: 10px;">Pro Plan 400</h3>
                    <p style="color: #64748b; font-size: 0.9rem;">~33 businesses • ~100 people called monthly</p>
                </div>
                
                <div class="plan-option" onclick="selectPlan('500')">
                    <h3 style="color: #374151; margin-bottom: 10px;">Pro Plan 500</h3>
                    <p style="color: #64748b; font-size: 0.9rem;">~42 businesses • ~125 people called monthly</p>
                </div>
                
                <div class="plan-option" onclick="selectPlan('600')">
                    <h3 style="color: #374151; margin-bottom: 10px;">Pro Plan 600</h3>
                    <p style="color: #64748b; font-size: 0.9rem;">~50 businesses • ~150 people called monthly</p>
                </div>
                
                <div class="plan-option" onclick="selectPlan('700')">
                    <h3 style="color: #374151; margin-bottom: 10px;">Pro Plan 700</h3>
                    <p style="color: #64748b; font-size: 0.9rem;">~58 businesses • ~175 people called monthly</p>
                </div>
                
                <div class="plan-option" onclick="selectPlan('800')">
                    <h3 style="color: #374151; margin-bottom: 10px;">Pro Plan 800</h3>
                    <p style="color: #64748b; font-size: 0.9rem;">~67 businesses • ~200 people called monthly</p>
                </div>
                
                <div class="plan-option" onclick="selectPlan('900')">
                    <h3 style="color: #374151; margin-bottom: 10px;">Pro Plan 900</h3>
                    <p style="color: #64748b; font-size: 0.9rem;">~75 businesses • ~225 people called monthly</p>
                </div>
                
                <div class="plan-option current" onclick="selectPlan('1000')">
                    <h3 style="color: #374151; margin-bottom: 10px;">Pro Plan 1000 (Current)</h3>
                    <p style="color: #64748b; font-size: 0.9rem;">~83 businesses • ~250 people called monthly</p>
                </div>
                
                <div class="plan-option" onclick="selectPlan('1100')">
                    <h3 style="color: #374151; margin-bottom: 10px;">Pro Plan 1100</h3>
                    <p style="color: #64748b; font-size: 0.9rem;">~92 businesses • ~275 people called monthly</p>
                </div>
                
                <div class="plan-option" onclick="selectPlan('1200')">
                    <h3 style="color: #374151; margin-bottom: 10px;">Pro Plan 1200</h3>
                    <p style="color: #64748b; font-size: 0.9rem;">~100 businesses • ~300 people called monthly</p>
                </div>
                
                <div class="plan-option" onclick="selectPlan('cancel')" style="border-color: #ef4444; background: #fef2f2;">
                    <h3 style="color: #dc2626; margin-bottom: 10px;">Cancel Service</h3>
                    <p style="color: #991b1b; font-size: 0.9rem;">End your current plan (30-day notice required)</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Set last updated time and load data
        document.addEventListener('DOMContentLoaded', function() {
            loadClientData();
        });

        async function loadClientData() {
            try {
                // Replace with your actual Netlify domain
                const response = await fetch('/.netlify/functions/client-data?clientId=dynamic-duo');
                
                if (!response.ok) {
                    throw new Error('Failed to fetch client data');
                }
                
                const data = await response.json();
                
                // Update metrics
                document.querySelector('[data-metric="totalAppointments"]').textContent = data.totalAppointments;
                document.querySelector('[data-metric="businessesContacted"]').textContent = data.businessesContacted;
                document.querySelector('[data-metric="peopleCalled"]').textContent = data.peopleCalled;
                document.querySelector('[data-metric="totalContactPoints"]').textContent = data.totalContactPoints.toLocaleString();
                
                // Update plan info
                document.querySelector('[data-plan="name"]').textContent = data.currentPlan;
                
                // Update appointments
                updateUpcomingAppointments(data.upcomingAppointments);
                
                // Update prospects
                updateProspects(data.prospects);
                
                // Update last updated time
                document.getElementById('lastUpdated').textContent = new Date(data.lastUpdated).toLocaleString();
                
                console.log('Client data loaded successfully');
                
            } catch (error) {
                console.error('Error loading client data:', error);
                // Fallback to current static data if API fails
                document.getElementById('lastUpdated').textContent = new Date().toLocaleString();
            }
        }

        function updateUpcomingAppointments(appointments) {
            const appointmentsList = document.querySelector('.appointments-list');
            if (!appointmentsList) return;
            
            appointmentsList.innerHTML = appointments.map((apt, index) => `
                <div class="appointment-item" data-appointment-id="${index}">
                    <div class="appointment-header">
                        <div class="appointment-time">${formatAppointmentDate(apt.date, apt.time)}</div>
                        <div class="appointment-status status-${apt.status}">${apt.status.charAt(0).toUpperCase() + apt.status.slice(1)}</div>
                    </div>
                    <div class="business-name">${apt.company}</div>
                    <div class="detail-item">${apt.contact} • ${apt.type} • ${apt.location}</div>
                    
                    <div class="appointment-actions">
                        <button class="appointment-btn btn-feedback" onclick="showFeedbackForm(${index})">Add Feedback</button>
                        <button class="appointment-btn btn-reschedule" onclick="showRescheduleCalendar(${index})">Reschedule</button>
                        <button class="appointment-btn btn-cancel" onclick="cancelAppointment(${index})">Cancel</button>
                    </div>
                    
                    <div class="feedback-form" id="feedback-form-${index}">
                        <h4 style="margin-bottom: 15px; color: #374151;">Appointment Feedback</h4>
                        <div class="form-group">
                            <label class="form-label">How did the appointment go?</label>
                            <select class="form-select" id="outcome-${index}">
                                <option value="">Select outcome...</option>
                                <option value="closed-won">Closed - Deal Won!</option>
                                <option value="closed-lost">Closed - Deal Lost</option>
                                <option value="follow-up">Need Follow-up</option>
                                <option value="proposal-sent">Proposal Sent</option>
                                <option value="no-show">No Show</option>
                                <option value="reschedule-needed">Need to Reschedule</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Deal Value (if closed)</label>
                            <input type="number" class="form-input" id="deal-value-${index}" placeholder="Enter deal value" min="0" step="100">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Notes</label>
                            <textarea class="form-textarea" id="notes-${index}" placeholder="Share details about the appointment, next steps, or any important information..."></textarea>
                        </div>
                        <div class="form-buttons">
                            <button class="btn btn-secondary" onclick="hideFeedbackForm(${index})">Cancel</button>
                            <button class="btn btn-primary" onclick="submitFeedback(${index})">Submit Feedback</button>
                        </div>
                    </div>
                    
                    <div class="calendar-container" id="calendar-container-${index}">
                        <h4 style="margin-bottom: 15px; color: #374151;">Reschedule Appointment</h4>
                        <div class="calendar-header">
                            <button class="calendar-nav" onclick="previousMonth(${index})">&lt;</button>
                            <h3 id="calendar-month-${index}">October 2025</h3>
                            <button class="calendar-nav" onclick="nextMonth(${index})">&gt;</button>
                        </div>
                        <div class="calendar-grid" id="calendar-grid-${index}">
                            <!-- Calendar days will be populated by JavaScript -->
                        </div>
                        <div class="time-slots" id="time-slots-${index}">
                            <div class="time-slot" onclick="selectTime(${index}, '9:00 AM')">9:00 AM</div>
                            <div class="time-slot" onclick="selectTime(${index}, '10:00 AM')">10:00 AM</div>
                            <div class="time-slot" onclick="selectTime(${index}, '11:00 AM')">11:00 AM</div>
                            <div class="time-slot" onclick="selectTime(${index}, '1:00 PM')">1:00 PM</div>
                            <div class="time-slot" onclick="selectTime(${index}, '2:00 PM')">2:00 PM</div>
                            <div class="time-slot" onclick="selectTime(${index}, '3:00 PM')">3:00 PM</div>
                            <div class="time-slot" onclick="selectTime(${index}, '4:00 PM')">4:00 PM</div>
                        </div>
                        <div class="form-buttons">
                            <button class="btn btn-secondary" onclick="hideRescheduleCalendar(${index})">Cancel</button>
                            <button class="btn btn-primary" onclick="confirmReschedule(${index})">Confirm New Time</button>
                        </div>
                    </div>
                    
                    <div class="success-message" id="success-message-${index}"></div>
                </div>
            `).join('');
        }

        function updateProspects(prospects) {
            const prospectsContainer = document.querySelector('.card:last-of-type > div[style*="overflow-y"]');
            if (!prospectsContainer) return;
            
            prospectsContainer.innerHTML = prospects.map(prospect => `
                <div class="prospect-item">
                    <div class="prospect-header">
                        <div class="business-name">${prospect.businessName}</div>
                        <div class="service-tag">${prospect.service}</div>
                    </div>
                    <div class="prospect-details">
                        <div class="detail-item">
                            <div class="detail-label">Location:</div>
                            ${prospect.location}
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Current Vendor:</div>
                            <span class="vendor-status ${prospect.hasVendor ? 'has-vendor' : 'no-vendor'}">
                                ${prospect.hasVendor ? 'Has Vendor' : 'No Vendor'}
                            </span>
                        </div>
                    </div>
                    <div class="notes-section">
                        <div class="notes-label">Call Notes:</div>
                        <div class="notes-content">${prospect.notes}</div>
                    </div>
                </div>
            `).join('');
        }

        function formatAppointmentDate(date, time) {
            const aptDate = new Date(date);
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            if (aptDate.toDateString() === today.toDateString()) {
                return `Today, ${time}`;
            } else if (aptDate.toDateString() === tomorrow.toDateString()) {
                return `Tomorrow, ${time}`;
            } else {
                return `${aptDate.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' })}, ${time}`;
            }
        }

        // Enhanced plan selection with API integration
        async function selectPlan(planType) {
            const planNames = {
                '100': 'Pro Plan 100',
                '200': 'Pro Plan 200',
                '300': 'Pro Plan 300',
                '400': 'Pro Plan 400',
                '500': 'Pro Plan 500',
                '600': 'Pro Plan 600',
                '700': 'Pro Plan 700',
                '800': 'Pro Plan 800',
                '900': 'Pro Plan 900',
                '1000': 'Pro Plan 1000',
                '1100': 'Pro Plan 1100',
                '1200': 'Pro Plan 1200',
                'cancel': 'Cancel Service'
            };

            try {
                // Send plan change request to your backend
                const response = await fetch('/.netlify/functions/send-plan-change', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        clientName: 'Dynamic Duo', // This would come from user data
                        clientEmail: 'client@dynamicduo.com',
                        currentPlan: 'Pro Plan 1000',
                        requestedPlan: planNames[planType]
                    })
                });

                if (response.ok) {
                    closePlanOptionsModal();
                    alert(`Thank you! Your ${planType === 'cancel' ? 'cancellation' : 'plan change'} request has been submitted. Our team will contact you within 24 hours.`);
                } else {
                    throw new Error('Failed to submit plan change request');
                }
            } catch (error) {
                console.error('Error submitting plan change:', error);
                // Fallback to email method
                const clientEmail = 'client@dynamicduo.com';
                const subject = encodeURIComponent(`Plan Change Request - ${planNames[planType]}`);
                const body = encodeURIComponent(`Hi Kinect B2B Team,

I would like to request a change to my service plan:

Current Plan: Pro Plan 1000
Requested Plan: ${planNames[planType]}

Please contact me to discuss the details and timing of this change.

Thank you,
Dynamic Duo`);

                window.location.href = `mailto:support@kinectb2b.com?subject=${subject}&body=${body}&cc=${clientEmail}`;
                closePlanOptionsModal();
            }
        }

        // Appointment Management Functions
        function showFeedbackForm(appointmentIndex) {
            const feedbackForm = document.getElementById(`feedback-form-${appointmentIndex}`);
            feedbackForm.classList.add('show');
            
            // Hide other forms
            hideRescheduleCalendar(appointmentIndex);
        }

        function hideFeedbackForm(appointmentIndex) {
            const feedbackForm = document.getElementById(`feedback-form-${appointmentIndex}`);
            feedbackForm.classList.remove('show');
        }

        async function submitFeedback(appointmentIndex) {
            const outcome = document.getElementById(`outcome-${appointmentIndex}`).value;
            const dealValue = document.getElementById(`deal-value-${appointmentIndex}`).value;
            const notes = document.getElementById(`notes-${appointmentIndex}`).value;
            
            if (!outcome) {
                alert('Please select an outcome for the appointment.');
                return;
            }
            
            try {
                // Send feedback to your backend
                const response = await fetch('/.netlify/functions/appointment-feedback', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        appointmentIndex,
                        outcome,
                        dealValue: dealValue ? parseFloat(dealValue) : null,
                        notes,
                        clientName: 'Dynamic Duo'
                    })
                });

                if (response.ok) {
                    hideFeedbackForm(appointmentIndex);
                    showSuccessMessage(appointmentIndex, 'Feedback submitted successfully! Your account manager will follow up if needed.');
                    
                    // Clear form
                    document.getElementById(`outcome-${appointmentIndex}`).value = '';
                    document.getElementById(`deal-value-${appointmentIndex}`).value = '';
                    document.getElementById(`notes-${appointmentIndex}`).value = '';
                } else {
                    throw new Error('Failed to submit feedback');
                }
            } catch (error) {
                console.error('Error submitting feedback:', error);
                alert('There was an error submitting your feedback. Please try again or contact support.');
            }
        }

        function showRescheduleCalendar(appointmentIndex) {
            const calendarContainer = document.getElementById(`calendar-container-${appointmentIndex}`);
            calendarContainer.classList.add('show');
            
            // Hide other forms
            hideFeedbackForm(appointmentIndex);
            
            // Initialize calendar for current month
            initializeCalendar(appointmentIndex);
        }

        function hideRescheduleCalendar(appointmentIndex) {
            const calendarContainer = document.getElementById(`calendar-container-${appointmentIndex}`);
            calendarContainer.classList.remove('show');
        }

        let selectedDate = {};
        let selectedTime = {};
        let currentCalendarMonth = {};

        function initializeCalendar(appointmentIndex) {
            const now = new Date();
            currentCalendarMonth[appointmentIndex] = new Date(now.getFullYear(), now.getMonth(), 1);
            renderCalendar(appointmentIndex);
        }

        function renderCalendar(appointmentIndex) {
            const monthYear = currentCalendarMonth[appointmentIndex];
            const monthNames = ["January", "February", "March", "April", "May", "June",
                               "July", "August", "September", "October", "November", "December"];
            
            document.getElementById(`calendar-month-${appointmentIndex}`).textContent = 
                `${monthNames[monthYear.getMonth()]} ${monthYear.getFullYear()}`;
            
            const calendarGrid = document.getElementById(`calendar-grid-${appointmentIndex}`);
            const firstDay = new Date(monthYear.getFullYear(), monthYear.getMonth(), 1);
            const lastDay = new Date(monthYear.getFullYear(), monthYear.getMonth() + 1, 0);
            const today = new Date();
            
            let html = '';
            
            // Add day headers
            const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayHeaders.forEach(day => {
                html += `<div class="calendar-day header">${day}</div>`;
            });
            
            // Add empty cells for days before the first day of the month
            for (let i = 0; i < firstDay.getDay(); i++) {
                html += `<div class="calendar-day disabled"></div>`;
            }
            
            // Add days of the month
            for (let day = 1; day <= lastDay.getDate(); day++) {
                const currentDay = new Date(monthYear.getFullYear(), monthYear.getMonth(), day);
                const isPast = currentDay < today;
                const isSelected = selectedDate[appointmentIndex] && 
                                 selectedDate[appointmentIndex].getDate() === day && 
                                 selectedDate[appointmentIndex].getMonth() === monthYear.getMonth();
                
                const classes = ['calendar-day'];
                if (isPast) classes.push('disabled');
                if (isSelected) classes.push('selected');
                
                html += `<div class="${classes.join(' ')}" 
                              onclick="${isPast ? '' : `selectDate(${appointmentIndex}, ${day})`}">
                            ${day}
                        </div>`;
            }
            
            calendarGrid.innerHTML = html;
        }

        function selectDate(appointmentIndex, day) {
            const monthYear = currentCalendarMonth[appointmentIndex];
            selectedDate[appointmentIndex] = new Date(monthYear.getFullYear(), monthYear.getMonth(), day);
            renderCalendar(appointmentIndex);
        }

        function selectTime(appointmentIndex, time) {
            selectedTime[appointmentIndex] = time;
            
            // Update visual selection
            const timeSlots = document.querySelectorAll(`#time-slots-${appointmentIndex} .time-slot`);
            timeSlots.forEach(slot => slot.classList.remove('selected'));
            event.target.classList.add('selected');
        }

        function previousMonth(appointmentIndex) {
            currentCalendarMonth[appointmentIndex].setMonth(currentCalendarMonth[appointmentIndex].getMonth() - 1);
            renderCalendar(appointmentIndex);
        }

        function nextMonth(appointmentIndex) {
            currentCalendarMonth[appointmentIndex].setMonth(currentCalendarMonth[appointmentIndex].getMonth() + 1);
            renderCalendar(appointmentIndex);
        }

        async function confirmReschedule(appointmentIndex) {
            if (!selectedDate[appointmentIndex] || !selectedTime[appointmentIndex]) {
                alert('Please select both a date and time for the new appointment.');
                return;
            }
            
            try {
                const response = await fetch('/.netlify/functions/reschedule-appointment', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        appointmentIndex,
                        newDate: selectedDate[appointmentIndex].toISOString().split('T')[0],
                        newTime: selectedTime[appointmentIndex],
                        clientName: 'Dynamic Duo'
                    })
                });

                if (response.ok) {
                    hideRescheduleCalendar(appointmentIndex);
                    showSuccessMessage(appointmentIndex, 
                        `Appointment rescheduled for ${selectedDate[appointmentIndex].toLocaleDateString()} at ${selectedTime[appointmentIndex]}. You'll receive a confirmation email shortly.`);
                    
                    // Reset selections
                    selectedDate[appointmentIndex] = null;
                    selectedTime[appointmentIndex] = null;
                    
                    // Reload appointments data
                    setTimeout(loadClientData, 1000);
                } else {
                    throw new Error('Failed to reschedule appointment');
                }
            } catch (error) {
                console.error('Error rescheduling appointment:', error);
                alert('There was an error rescheduling your appointment. Please try again or contact support.');
            }
        }

        async function cancelAppointment(